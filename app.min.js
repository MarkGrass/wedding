const viewport=document.querySelector(".viewport"),viewportWidth=viewport.clientWidth,sky=document.querySelector(".sky"),clouds=Array.from(sky.children),breakpoints=document.querySelector(".breakpoints"),pages=document.querySelector(".pages"),frames=Array.from(pages.children),contactsModal=document.querySelector(".modal"),welcomeFrame=pages.querySelector(".logo-frame"),welcomeFrameLength=Number(welcomeFrame.getAttribute("r"))*Math.PI*2,welcomeFrameDashOffset=Number(welcomeFrame.getAttribute("stroke-dashoffset")||0),welcomeFrameMultiplier=welcomeFrameLength/viewportWidth*2,commonFrame=pages.querySelector(".common-frame"),commonFrameLength=Number((commonFrame.width.baseVal.value+commonFrame.height.baseVal.value)*2),commonFrameDashOffset=Number(commonFrame.getAttribute("stroke-dashoffset")||0),commonFrameMultiplier=commonFrameLength/viewportWidth*2,dateFrame1=pages.querySelector(".date-frame-1"),dateFrame2=pages.querySelector(".date-frame-2"),dateFrameLength=7132,dateFrameDashOffset=Number(dateFrame1.getAttribute("stroke-dashoffset")||0),dateFrameMultiplier=7132/viewportWidth*2,placeFrame1=pages.querySelector(".place-frame-1"),placeFrame2=pages.querySelector(".place-frame-2"),placeFrame3=pages.querySelector(".place-frame-3"),placeOfficial=pages.querySelector(".page-place .official"),placeRest=pages.querySelector(".page-place .rest"),placeFrameLength=Number((placeFrame1.width.baseVal.value+placeFrame1.height.baseVal.value)*2),placeFrameDashOffset=Number(placeFrame1.getAttribute("stroke-dashoffset")||0),placeFrameMultiplier=placeFrameLength/viewportWidth*2,contactsFrame=pages.querySelector(".contacts-frame"),rulesGifts=pages.querySelector(".page-contacts .gifts"),rulesChild=pages.querySelector(".page-contacts .child"),rulesCall=pages.querySelector(".page-contacts .call"),contactsFrameLength=Number((contactsFrame.width.baseVal.value+contactsFrame.height.baseVal.value)*2),contactsFrameDashOffset=Number(contactsFrame.getAttribute("stroke-dashoffset")||0),contactsFrameMultiplier=contactsFrameLength/viewportWidth*2,setActivePage=a=>{frames.forEach(a=>{a.classList.remove("_active")}),frames[a].classList.add("_active")},invertScroll=a=>{a.deltaY&&(breakpoints.scrollLeft-=a.deltaY+a.deltaX,a.preventDefault())},handler=b=>{let a=breakpoints.scrollLeft;clouds.forEach((c,d)=>{let{left:e,width:f}=c.getBoundingClientRect(),b=0;switch(d){case 0:b=0;break;case 1:case 8:b=-0.02;break;case 2:b=.11;break;case 3:b=.18;break;case 4:b=-0.04;break;case 5:b=.03;break;case 6:case 11:case 17:b=.15;break;case 7:b=-0.05;break;case 9:b=.17;break;case 10:b=.23;break;case 12:b=.45;break;case 13:b=1.05;break;case 14:b=.57;break;case 15:b=.74;break;case 16:b=.33;break;case 18:b=.07;break;case 19:b=.1;break;case 20:b=.12;break;case 21:b=.015;break;default:b=.09}c.style.transform=`translateX(${-1*a*b}px)`}),a>viewportWidth/2&&a<viewportWidth&&(setActivePage(0),contactsModal.classList.remove("_show"),welcomeFrame.setAttribute("stroke-dashoffset",`${welcomeFrameDashOffset+(a-viewportWidth/2)*welcomeFrameMultiplier}`)),a>=viewportWidth&&a<1.5*viewportWidth&&(setActivePage(1),contactsModal.classList.remove("_show"),(a-viewportWidth)*commonFrameMultiplier<commonFrameDashOffset?(commonFrame.setAttribute("stroke-dashoffset",`${commonFrameDashOffset+(a-viewportWidth)*commonFrameMultiplier}`),commonFrame.setAttribute("stroke-dasharray",`${(a-viewportWidth)*commonFrameMultiplier} ${commonFrameLength}`)):(commonFrame.setAttribute("stroke-dashoffset",0),commonFrame.setAttribute("stroke-dasharray",`${commonFrameLength}`))),a>=1.5*viewportWidth&&a<2*viewportWidth&&commonFrame.setAttribute("stroke-dashoffset",`${-1*(a-1.5*viewportWidth)*commonFrameMultiplier}`),a>=2*viewportWidth&&a<3*viewportWidth&&(setActivePage(2),contactsModal.classList.remove("_show"),dateFrame1.setAttribute("stroke-dashoffset",`${dateFrameDashOffset+(a-2*viewportWidth)*dateFrameMultiplier}`),a>=2.1*viewportWidth&&dateFrame2.setAttribute("stroke-dashoffset",`${dateFrameDashOffset+(a-2.1*viewportWidth)*dateFrameMultiplier}`)),a>=3*viewportWidth&&(setActivePage(3),contactsModal.classList.remove("_show"),placeOfficial.classList.add("_active"),placeRest.classList.remove("_active"),placeFrame1.setAttribute("stroke-dashoffset",`${placeFrameDashOffset+(a-3*viewportWidth)*placeFrameMultiplier}`),a>=3.1*viewportWidth&&placeFrame2.setAttribute("stroke-dashoffset",`${placeFrameDashOffset+(a-3.1*viewportWidth)*placeFrameMultiplier}`),a>=3.2*viewportWidth&&placeFrame3.setAttribute("stroke-dashoffset",`${placeFrameDashOffset+(a-3.2*viewportWidth)*placeFrameMultiplier}`),a>=4*viewportWidth&&(placeOfficial.classList.remove("_active"),placeRest.classList.add("_active"))),a>=5*viewportWidth&&(setActivePage(4),rulesGifts.classList.add("_active"),rulesChild.classList.remove("_active"),rulesCall.classList.remove("_active"),contactsModal.classList.remove("_show"),a<Math.round(6.5*viewportWidth)&&contactsFrame.setAttribute("stroke-dashoffset",`${contactsFrameDashOffset+(a-4*viewportWidth)*contactsFrameMultiplier}`),a>=6*viewportWidth&&(rulesChild.classList.add("_active"),rulesGifts.classList.remove("_active"),rulesCall.classList.remove("_active"),contactsModal.classList.remove("_show")),a>=7*viewportWidth&&(rulesGifts.classList.remove("_active"),rulesChild.classList.remove("_active"),rulesCall.classList.add("_active"),contactsModal.classList.add("_show")))};breakpoints.addEventListener("wheel",invertScroll),breakpoints.addEventListener("mousewheel",invertScroll),breakpoints.addEventListener("scroll",handler);let count="\u0414\u043E\u0440\u043E\u0433\u043E\u0439",person="\u0442\u0435\u0431\u044F",meet="\u0442\u043E\u0431\u043E\u0439",names="\u0414\u0440\u0443\u0433",gift="\u0442\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0448\u044C",call="\u0442\u044B \u043C\u043E\u0436\u0435\u0448\u044C";const{search:a}=window.location,entries=Array.from(document.querySelectorAll(".pages .box"));if(a){let b=a.replace(/\?g=|\?q=/,"");switch(b){case"fCNuQzJ0":names="\u041C\u0430\u043C\u0430 \u0438 \u041F\u0430\u043F\u0430",count="\u0414\u043E\u0440\u043E\u0433\u0438\u0435",person="\u0432\u0430\u0441",meet="\u0432\u0430\u043C\u0438",call="\u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435",gift="\u0432\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u0435";break;case"SCNuQDJ0":names="\u0411\u0430\u0431\u0443\u043B\u044F \u0438 \u0414\u0435\u0434\u0443\u043B\u044F",count="\u0414\u043E\u0440\u043E\u0433\u0438\u0435",person="\u0432\u0430\u0441",meet="\u0432\u0430\u043C\u0438",call="\u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435",gift="\u0432\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u0435";break;case"YCNuQDK0":names="\u0418\u0440\u0438\u043D\u0430 \u0438 \u0420\u043E\u043C\u0430\u043D",count="\u0414\u043E\u0440\u043E\u0433\u0438\u0435",person="\u0432\u0430\u0441",meet="\u0432\u0430\u043C\u0438",call="\u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435",gift="\u0432\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u0435";break;case"cCNuQvJ0":names="\u041C\u0430\u0440\u0438\u043D\u0430 \u0438 \u0410\u043B\u0435\u043A\u0441\u0435\u0439",count="\u0414\u043E\u0440\u043E\u0433\u0438\u0435",person="\u0432\u0430\u0441",meet="\u0432\u0430\u043C\u0438",call="\u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435",gift="\u0432\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u0435";break;case"QCNuQHJ0":names="\u0410\u043D\u043D\u0430 \u0438 \u0411\u0443\u043B\u0430\u0442",count="\u0414\u043E\u0440\u043E\u0433\u0438\u0435",person="\u0432\u0430\u0441",meet="\u0432\u0430\u043C\u0438",call="\u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435",gift="\u0432\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u0435";break;case"UCNuQHK0":names="\u0414\u0438\u043D\u0430 \u0438 \u0410\u043B\u0435\u043A\u0441\u0430\u043D\u0434\u0440",count="\u0414\u043E\u0440\u043E\u0433\u0438\u0435",person="\u0432\u0430\u0441",meet="\u0432\u0430\u043C\u0438",call="\u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435",gift="\u0432\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u0435";break;case"WCNuQLK0":names="\u0415\u0432\u0433\u0435\u043D\u0438\u044F \u0438 \u0410\u043D\u0430\u0442\u043E\u043B\u0438\u0439",count="\u0414\u043E\u0440\u043E\u0433\u0438\u0435",person="\u0432\u0430\u0441",meet="\u0432\u0430\u043C\u0438",call="\u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435",gift="\u0432\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u0435";break;case"QCNuQDJ0":names="\u0410\u0439\u044F \u0438 \u0410\u0440\u0441\u043B\u0430\u043D",count="\u0414\u043E\u0440\u043E\u0433\u0438\u0435",person="\u0432\u0430\u0441",meet="\u0432\u0430\u043C\u0438",call="\u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435",gift="\u0432\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u0435";break;case"BGNsQ3J0":names="\u0410\u043D\u0430\u0441\u0442\u0430\u0441\u0438\u044F",count="\u0414\u043E\u0440\u043E\u0433\u0430\u044F",person="\u0442\u0435\u0431\u044F",meet="\u0442\u043E\u0431\u043E\u0439",call="\u0442\u044B \u043C\u043E\u0436\u0435\u0448\u044C",gift="\u0442\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0448\u044C";break;case"IGNsQHK0":names="\u0410\u043B\u0435\u043A\u0441\u0430\u043D\u0434\u0440",count="\u0414\u043E\u0440\u043E\u0433\u043E\u0439",person="\u0442\u0435\u0431\u044F",meet="\u0442\u043E\u0431\u043E\u0439",call="\u0442\u044B \u043C\u043E\u0436\u0435\u0448\u044C",gift="\u0442\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0448\u044C";break;case"0CdvQDJ0":names="\u0410\u043D\u0434\u0440\u0435\u0439",count="\u0414\u043E\u0440\u043E\u0433\u043E\u0439",person="\u0442\u0435\u0431\u044F",meet="\u0442\u043E\u0431\u043E\u0439",call="\u0442\u044B \u043C\u043E\u0436\u0435\u0448\u044C",gift="\u0442\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0448\u044C";break;case"zCduQDJ0":names="\u0410\u0439\u0433\u0443\u043B\u044C",count="\u0414\u043E\u0440\u043E\u0433\u0430\u044F",person="\u0442\u0435\u0431\u044F",meet="\u0442\u043E\u0431\u043E\u0439",call="\u0442\u044B \u043C\u043E\u0436\u0435\u0448\u044C",gift="\u0442\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0448\u044C";break;default:names="\u0414\u0440\u0443\u0433",count="\u0414\u043E\u0440\u043E\u0433\u043E\u0439",person="\u0442\u0435\u0431\u044F",meet="\u0442\u043E\u0431\u043E\u0439",call="\u0442\u044B \u043C\u043E\u0436\u0435\u0448\u044C",gift="\u0442\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0448\u044C"}}entries[0].innerHTML=count,entries[1].innerHTML=names,entries[2].innerHTML=person,entries[3].innerHTML=meet,entries[4].innerHTML=gift,entries[5].innerHTML=call;const activities=b=>{let a=document.querySelector(".page._active ");a.classList.contains("page-date")&&(b.clientY<viewport.clientHeight/2?window.open("https://www.instagram.com/explore/locations/110681295/"):window.open("https://www.instagram.com/art.to.eat/","_blank")),a.classList.contains("page-place")&&(placeOfficial.classList.contains("_active")?window.open("https://yandex.ru/maps/43/kazan/?ll=49.107951%2C55.812090&mode=routes&rtext=~55.812880%2C49.108288&rtt=auto&ruri=~ymapsbm1%3A%2F%2Forg%3Foid%3D5902021407&z=16.77","_blank"):window.open("https://yandex.ru/maps/43/kazan/?ll=49.116130%2C55.788570&mode=routes&rtext=~55.787574%2C49.108678&rtt=auto&ruri=~&z=15.27","_blank"))};document.addEventListener("click",activities)
